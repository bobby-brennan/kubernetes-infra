namespace: ghost
charts:
  ghost:
    namespace: ghost
    version: 8.0.6
    values:
      ghostUsername: $GHOST_USERNAME
      ghostEmail: $GHOST_USERNAME
      ghostPassword: $GHOST_PASSWORD
      ghostBlogTitle: $GHOST_TITLE
      service:
        type: ClusterIP
      ghostHost: $GHOST_HOST
      persistence:
        path: /opt/local-path-provisioner
      mariadb:
        db:
          password: $GHOST_PASSWORD
        rootUser:
          password: $GHOST_PASSWORD
        image:
          debug: true
      ingress:
        enabled: true
        hosts:
          - name: $GHOST_HOST
            tls: true
            tlsSecret: tls-prod-cert-ghost
        annotations:
          kubernetes.io/ingress.class: nginx
          certmanager.k8s.io/cluster-issuer: letsencrypt-prod
          kubernetes.io/tls-acme: "true"
          nginx.ingress.kubernetes.io/proxy-body-size: 5m
    hooks:
      post_install:
        - sleep 10
        - ../../scripts/retain.sh
