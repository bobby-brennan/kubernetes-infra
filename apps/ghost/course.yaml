namespace: mc-blog
repositories:
  rbrenfork:
    git: git@github.com:rbren/charts.git
    path: stable
charts:
  ghost:
    namespace: mc-blog
    repository: rbrenfork
    version: rb/ghost
    values:
      ghostUsername: $GHOST_USERNAME
      ghostEmail: $GHOST_USERNAME
      ghostPassword: $GHOST_PASSWORD
      ghostBlogTitle: $GHOST_TITLE
      service:
        type: ClusterIP
      ghostHost: $GHOST_HOST
      persistence:
        enabled: true
        existingClaim: ghost-app
      mariadb:
        db:
          password: $GHOST_PASSWORD
        rootUser:
          password: $GHOST_PASSWORD
        image:
          debug: true
        master:
          persistence:
            existingClaim: ghost-mariadb
      ingress:
        enabled: true
        hosts:
          - name: $GHOST_HOST
            tls: true
            tlsSecret: tls-prod-cert-ghost
        annotations:
          kubernetes.io/ingress.class: nginx
          certmanager.k8s.io/cluster-issuer: letsencrypt-prod
          kubernetes.io/tls-acme: "true"
          nginx.ingress.kubernetes.io/proxy-body-size: 5m
          nginx.ingress.kubernetes.io/auth-type: basic
          nginx.ingress.kubernetes.io/auth-secret: basic-auth
          nginx.ingress.kubernetes.io/auth-realm: 'Authentication Required'
